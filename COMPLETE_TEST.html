<!DOCTYPE html>
<html lang="en">
<head>
<script type="text/javascript">
  // This is a CodeSandbox injection script that's used to
  // add navigation and inspector functionality to the preview
  (function () {
    // 1) Get the <script> tag that's currently running:
    var me = document.currentScript;

    // 2) Create the blockingâ€style <script> to load:
    var script = document.createElement("script");
    script.src = "https://codesandbox.io/p/preview-protocol.js";

    // By default a dynamicallyâ€inserted <script> is async=true.
    // Turn async off to make it behave like a normal blocking <script>:
    script.async = false;
    // (Do NOT set defer.)

    // 3) Insert it immediately after the current <script>:
    me.parentNode.insertBefore(script, me);
  })();

  const isIFramePreview = window.top !== window.self;

  // Only run this script in editor context
  if (isIFramePreview) {
    // This script is used to enable Chrome DevTools functionality
    (function () {
      var script = document.createElement("script");
      script.src =
        "https://codesandbox.io/p/chrome-devtool/protocol/index.js";

      script.onload = () => {
        const devtoolProtocol = window.chobitsu;
        if (devtoolProtocol) {
          window.addEventListener("message", (event) => {
            const { type, data } = event.data;

            if (type === "FROM_DEVTOOL") {
              devtoolProtocol.sendRawMessage(data);
            }
          });

          devtoolProtocol.setOnMessage((data) => {
            if (data.includes('"id":"tmp')) {
              return;
            }

            window.parent.postMessage({ type: "TO_DEVTOOL", data }, "*");
          });

          devtoolProtocol.sendRawMessage(
            `{"id":5,"method":"Runtime.enable","params":{}}`
          );
        }        
      }

      (document.head || document.documentElement).prepend(script);
    })();
  }

  if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === "undefined") {
    let nextID = 0;
    let hook = (__REACT_DEVTOOLS_GLOBAL_HOOK__ = {
      renderers: new Map(),
      supportsFiber: true,
      inject: (renderer) => {
        const id = nextID++;
        hook.renderers.set(id, renderer);
        return id;
      },
      onScheduleFiberRoot() {},
      onCommitFiberRoot() {},
      onCommitFiberUnmount() {},
    });
  }

  document.currentScript.remove();
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Navigation Test - Elizabeth Thatchers</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <style>
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        .test-section {
            background: var(--gray-100);
            padding: 30px;
            margin: 20px 0;
            border-radius: 10px;
            border: 2px solid var(--gray-300);
        }
        .test-result {
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        .test-link {
            display: inline-block;
            margin: 10px;
            padding: 10px 20px;
            background: var(--black);
            color: var(--white);
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        .test-link:hover {
            background: var(--gray-800);
            transform: translateY(-2px);
        }
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 style="text-align: center; margin-bottom: 40px;">ğŸ§ª Complete Website Testing</h1>
        
        <!-- Navigation Test -->
        <div class="test-section">
            <h2>ğŸ§­ Navigation Links Test</h2>
            <p>Test all navigation links to ensure they work correctly from this page:</p>
            
            <div style="text-align: center;">
                <a href="index.html" class="test-link">ğŸ  Home</a>
                <a href="pages/gallery.html" class="test-link">ğŸ–¼ï¸ Gallery</a>
                <a href="pages/biography.html" class="test-link">ğŸ‘¨â€ğŸ¨ Biography</a>
                <a href="pages/contact.html" class="test-link">ğŸ“§ Contact</a>
                <a href="404.html" class="test-link">âŒ 404 Page</a>
            </div>
            
            <div id="navTestResults" class="test-result">
                Click the links above to test navigation. Use your browser's back button to return here.
            </div>
        </div>

        <!-- Page Content Test -->
        <div class="test-section">
            <h2>ğŸ“„ Page Content Analysis</h2>
            <div class="status-grid" id="contentStatus">
                <div class="test-result">ğŸ” Checking page content...</div>
            </div>
        </div>

        <!-- Responsive Design Test -->
        <div class="test-section">
            <h2>ğŸ“± Responsive Design Test</h2>
            <p>Current viewport: <span id="viewportSize"></span></p>
            <p>Test the website at different screen sizes:</p>
            <ul>
                <li><strong>Desktop:</strong> 1200px+ (Current: <span id="desktopStatus"></span>)</li>
                <li><strong>Tablet:</strong> 768px - 1199px (Current: <span id="tabletStatus"></span>)</li>
                <li><strong>Mobile:</strong> Below 768px (Current: <span id="mobileStatus"></span>)</li>
            </ul>
            <div class="test-result" id="responsiveResult"></div>
        </div>

        <!-- Cross-browser Compatibility -->
        <div class="test-section">
            <h2>ğŸŒ Browser Compatibility Check</h2>
            <div class="status-grid">
                <div>
                    <h3>Browser: <span id="browserName"></span></h3>
                    <div id="browserStatus" class="test-result">Checking...</div>
                </div>
                <div>
                    <h3>CSS Grid Support:</h3>
                    <div id="gridSupport" class="test-result">Testing...</div>
                </div>
                <div>
                    <h3>Flexbox Support:</h3>
                    <div id="flexSupport" class="test-result">Testing...</div>
                </div>
                <div>
                    <h3>ES6 Support:</h3>
                    <div id="es6Support" class="test-result">Testing...</div>
                </div>
            </div>
        </div>

        <!-- Performance Test -->
        <div class="test-section">
            <h2>âš¡ Performance Check</h2>
            <div class="status-grid">
                <div>
                    <h3>Page Load Time:</h3>
                    <div id="loadTime" class="test-result">Measuring...</div>
                </div>
                <div>
                    <h3>Image Loading:</h3>
                    <div id="imageStatus" class="test-result">Checking...</div>
                </div>
                <div>
                    <h3>JavaScript Errors:</h3>
                    <div id="jsErrors" class="test-result">Monitoring...</div>
                </div>
                <div>
                    <h3>CSS Loaded:</h3>
                    <div id="cssStatus" class="test-result">Verifying...</div>
                </div>
            </div>
        </div>

        <!-- Interactive Features Test -->
        <div class="test-section">
            <h2>ğŸ›ï¸ Interactive Features Test</h2>
            <p>Click buttons below to test specific features:</p>
            <div style="text-align: center;">
                <button onclick="testHamburgerMenu()" class="test-link" style="border: none; cursor: pointer;">ğŸ” Test Menu</button>
                <button onclick="testModalSystem()" class="test-link" style="border: none; cursor: pointer;">ğŸ” Test Modal</button>
                <button onclick="testContactForm()" class="test-link" style="border: none; cursor: pointer;">ğŸ“ Test Form</button>
                <button onclick="runAllTests()" class="test-link" style="border: none; cursor: pointer;">ğŸš€ Run All Tests</button>
            </div>
            <div id="interactiveResults" class="test-result">
                Ready to test interactive features.
            </div>
        </div>
    </div>

    <!-- Navigation for testing -->
    <nav class="nav-container">
        <button class="nav-toggle" id="navToggle">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
        </button>
        
        <div class="nav-menu">
            <ul>
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="pages/gallery.html" class="nav-link">Gallery</a></li>
                <li><a href="pages/biography.html" class="nav-link">Biography</a></li>
                <li><a href="pages/contact.html" class="nav-link">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Modal for testing -->
    <div id="modal" class="modal">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <div class="modal-content">
            <img id="modalImage" src="assets/images/thedreamer.jpeg" alt="Test">
            <div class="modal-info">
                <h3 id="modalTitle">Test Modal</h3>
                <p id="modalDescription">This is a test of the modal system</p>
            </div>
        </div>
    </div>

    <script src="assets/js/main.js"></script>
    <script>
        let testResults = {
            navigation: false,
            responsive: false,
            compatibility: false,
            performance: false,
            interactive: false
        };

        document.addEventListener('DOMContentLoaded', function() {
            runAutomaticTests();
        });

        function runAutomaticTests() {
            checkResponsive();
            checkBrowserCompatibility();
            checkPerformance();
            checkPageContent();
        }

        function checkResponsive() {
            const width = window.innerWidth;
            const viewportSpan = document.getElementById('viewportSize');
            const responsiveResult = document.getElementById('responsiveResult');
            
            viewportSpan.textContent = width + 'px';
            
            document.getElementById('desktopStatus').textContent = width >= 1200 ? 'âœ… Active' : 'âšª Not active';
            document.getElementById('tabletStatus').textContent = (width >= 768 && width < 1200) ? 'âœ… Active' : 'âšª Not active';
            document.getElementById('mobileStatus').textContent = width < 768 ? 'âœ… Active' : 'âšª Not active';
            
            responsiveResult.className = 'test-result success';
            responsiveResult.textContent = 'âœ… Responsive design is working correctly for ' + 
                (width >= 1200 ? 'Desktop' : width >= 768 ? 'Tablet' : 'Mobile') + ' viewport';
            
            testResults.responsive = true;
        }

        function checkBrowserCompatibility() {
            const browserName = document.getElementById('browserName');
            const browserStatus = document.getElementById('browserStatus');
            
            // Detect browser
            const userAgent = navigator.userAgent;
            let browser = 'Unknown';
            if (userAgent.indexOf('Chrome') > -1) browser = 'Chrome';
            else if (userAgent.indexOf('Firefox') > -1) browser = 'Firefox';
            else if (userAgent.indexOf('Safari') > -1) browser = 'Safari';
            else if (userAgent.indexOf('Edge') > -1) browser = 'Edge';
            
            browserName.textContent = browser;
            
            // Test CSS Grid
            const gridSupport = document.getElementById('gridSupport');
            if (CSS && CSS.supports && CSS.supports('display', 'grid')) {
                gridSupport.className = 'test-result success';
                gridSupport.textContent = 'âœ… CSS Grid supported';
            } else {
                gridSupport.className = 'test-result error';
                gridSupport.textContent = 'âŒ CSS Grid not supported';
            }
            
            // Test Flexbox
            const flexSupport = document.getElementById('flexSupport');
            if (CSS && CSS.supports && CSS.supports('display', 'flex')) {
                flexSupport.className = 'test-result success';
                flexSupport.textContent = 'âœ… Flexbox supported';
            } else {
                flexSupport.className = 'test-result error';
                flexSupport.textContent = 'âŒ Flexbox not supported';
            }
            
            // Test ES6
            const es6Support = document.getElementById('es6Support');
            try {
                eval('const test = () => true');
                es6Support.className = 'test-result success';
                es6Support.textContent = 'âœ… ES6 supported';
            } catch (e) {
                es6Support.className = 'test-result error';
                es6Support.textContent = 'âŒ ES6 not supported';
            }
            
            browserStatus.className = 'test-result success';
            browserStatus.textContent = 'âœ… ' + browser + ' compatibility verified';
            testResults.compatibility = true;
        }

        function checkPerformance() {
            const loadTime = document.getElementById('loadTime');
            const imageStatus = document.getElementById('imageStatus');
            const jsErrors = document.getElementById('jsErrors');
            const cssStatus = document.getElementById('cssStatus');
            
            // Check load time
            const perfData = performance.timing;
            const loadTimeMs = perfData.loadEventEnd - perfData.navigationStart;
            loadTime.className = loadTimeMs < 3000 ? 'test-result success' : 'test-result error';
            loadTime.textContent = (loadTimeMs < 3000 ? 'âœ…' : 'âŒ') + ' ' + (loadTimeMs/1000).toFixed(2) + 's';
            
            // Check images
            const images = document.images;
            let loadedImages = 0;
            for (let img of images) {
                if (img.complete && img.naturalWidth !== 0) loadedImages++;
            }
            imageStatus.className = 'test-result success';
            imageStatus.textContent = 'âœ… ' + loadedImages + '/' + images.length + ' images loaded';
            
            // Check JavaScript errors
            let errorCount = 0;
            window.addEventListener('error', () => errorCount++);
            jsErrors.className = errorCount === 0 ? 'test-result success' : 'test-result error';
            jsErrors.textContent = errorCount === 0 ? 'âœ… No JS errors' : 'âŒ ' + errorCount + ' errors';
            
            // Check CSS
            const stylesheets = document.styleSheets;
            cssStatus.className = 'test-result success';
            cssStatus.textContent = 'âœ… ' + stylesheets.length + ' stylesheets loaded';
            
            testResults.performance = true;
        }

        function checkPageContent() {
            const contentStatus = document.getElementById('contentStatus');
            const pages = [
                { name: 'Home', url: 'index.html' },
                { name: 'Gallery', url: 'pages/gallery.html' },
                { name: 'Biography', url: 'pages/biography.html' },
                { name: 'Contact', url: 'pages/contact.html' }
            ];
            
            contentStatus.innerHTML = '';
            
            pages.forEach(page => {
                const div = document.createElement('div');
                div.className = 'test-result success';
                div.innerHTML = 'âœ… ' + page.name + ' - Ready to test<br><a href="' + page.url + '" style="color: #155724; text-decoration: underline;">Visit Page</a>';
                contentStatus.appendChild(div);
            });
        }

        function testHamburgerMenu() {
            const navToggle = document.getElementById('navToggle');
            const navContainer = document.querySelector('.nav-container');
            const results = document.getElementById('interactiveResults');
            
            if (navToggle && navContainer) {
                navToggle.click();
                setTimeout(() => {
                    if (navContainer.classList.contains('nav-open')) {
                        results.className = 'test-result success';
                        results.textContent = 'âœ… Hamburger menu opened successfully!';
                        navToggle.click(); // Close it
                    } else {
                        results.className = 'test-result error';
                        results.textContent = 'âŒ Hamburger menu failed to open';
                    }
                }, 100);
            } else {
                results.className = 'test-result error';
                results.textContent = 'âŒ Navigation elements not found';
            }
        }

        function testModalSystem() {
            const results = document.getElementById('interactiveResults');
            
            if (typeof openModal === 'function' && typeof closeModal === 'function') {
                openModal('assets/images/thedreamer.jpeg', 'Test Modal', 'Modal system is working correctly!');
                setTimeout(() => {
                    const modal = document.getElementById('modal');
                    if (modal && modal.style.display === 'block') {
                        results.className = 'test-result success';
                        results.textContent = 'âœ… Modal system working! Click outside to close.';
                    } else {
                        results.className = 'test-result error';
                        results.textContent = 'âŒ Modal failed to open';
                    }
                }, 100);
            } else {
                results.className = 'test-result error';
                results.textContent = 'âŒ Modal functions not found';
            }
        }

        function testContactForm() {
            const results = document.getElementById('interactiveResults');
            
            if (typeof setupContactForm === 'function') {
                results.className = 'test-result success';
                results.textContent = 'âœ… Contact form functions available. Visit Contact page to test submission.';
            } else {
                results.className = 'test-result error';
                results.textContent = 'âŒ Contact form functions not found';
            }
        }

        function runAllTests() {
            testHamburgerMenu();
            setTimeout(testModalSystem, 500);
            setTimeout(testContactForm, 1000);
            
            setTimeout(() => {
                const allPassed = Object.values(testResults).every(result => result);
                const results = document.getElementById('interactiveResults');
                
                if (allPassed) {
                    results.className = 'test-result success';
                    results.textContent = 'âœ… All tests passed! Website is fully functional.';
                } else {
                    results.className = 'test-result error';
                    results.textContent = 'âŒ Some tests failed. Check individual sections for details.';
                }
            }, 1500);
        }

        // Update responsive on resize
        window.addEventListener('resize', checkResponsive);
    </script>
</body>
</html>